function json(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:!1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function json_async(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function ajax(a,b,c,d){$.ajax({url:a,type:"GET",cache:!1,data:b,async:!0,success:function(a){c(a)},error:function(a,b,c){d?d(a.responseText):window.alert(c.message)}})}function html2text(){$(".html_2_text").each(function(){var a=$(this).text(),b=$(this).text().length,c=50;if(void 0!=$(this).data("word-count"))try{c=parseInt($(this).data("word-count"))}catch(a){}c>0&&($(this).text(a.substring(0,c)),b>=c&&$(this).text($(this).text()+"...")),$(this).show()})}function yooliang_replace_url_param(a,b,c){a=a.replace("#/","");var d="",e=(a.substring(0,a.indexOf("?")),a.substring(a.indexOf("?"),a.length)),f=0;if(a.indexOf("?")>=0){var g=e.indexOf(b+"=");g>=0?(f=e.indexOf("&",g),f>=0?(d=e.substring(g+b.length+1,f),e=a.replace(b+"="+d,b+"="+c)):(d=e.substring(g+b.length+1,e.length),e=a.replace(b+"="+d,b+"="+c))):e=a+"&"+b+"="+c}else e=a+"?"+b+"="+c;return e}function showNotify(a){top.message.quick_info(a)}function show_page(){var a=$("#history option:selected").text()||"新文件",b=$("#history").val()||"",c="/code/editor?customer="+target_id+"&file_type="+target_type+"&record_key="+b;$("#page_viewer").load(c,function(){showNotify("已載入 "+a),$(".codemirror").each(function(){var a=$(this).attr("id");void 0==a&&(a=$(this).attr("name"),$(this).attr("id",a));var b=target_type;"html"==target_type&&(b="text/html"),console.log(b),code_editor=CodeMirror.fromTextArea(document.getElementById(a),{mode:b,lineNumbers:!0,indentUnit:4,matchBrackets:!0,foldGutter:!0,autofocus:!0,extraKeys:{"Ctrl-S":function(a){""!=target_id&&$("#btn_1").click()}},extra_keywords:["sql","response"]}),code_editor.on("change",function(b){$("#"+a).val(b.getValue()),$("#"+a).change()})})})}function selectTheme(){var a=$("#theme-select option:selected").text();code_editor.setOption("theme",a)}function after_save(a){showNotify("已儲存"),load()}function load(a){$("#history").html(""),json_async("/admin/code/records?target="+target_id+"&content_type="+target_type,null,function(b){$.map(b.records,function(a,b){var c=a.modified.isoformat.replace("T"," ").split(".")[0];$("#history").append("<option value='"+a.__key__+"'>"+a.title+" - "+c+"</option>")}),"function"==typeof a&&a(b)})}function json(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:!1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function json_async(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function ajax(a,b,c,d){$.ajax({url:a,type:"GET",cache:!1,data:b,async:!0,success:function(a){c(a)},error:function(a,b,c){d?d(a.responseText):window.alert(c.message)}})}function html2text(){$(".html_2_text").each(function(){var a=$(this).text(),b=$(this).text().length,c=50;if(void 0!=$(this).data("word-count"))try{c=parseInt($(this).data("word-count"))}catch(a){}c>0&&($(this).text(a.substring(0,c)),b>=c&&$(this).text($(this).text()+"...")),$(this).show()})}function yooliang_replace_url_param(a,b,c){a=a.replace("#/","");var d="",e=(a.substring(0,a.indexOf("?")),a.substring(a.indexOf("?"),a.length)),f=0;if(a.indexOf("?")>=0){var g=e.indexOf(b+"=");g>=0?(f=e.indexOf("&",g),f>=0?(d=e.substring(g+b.length+1,f),e=a.replace(b+"="+d,b+"="+c)):(d=e.substring(g+b.length+1,e.length),e=a.replace(b+"="+d,b+"="+c))):e=a+"&"+b+"="+c}else e=a+"?"+b+"="+c;return e}function showNotify(a){top.message.quick_info(a)}function show_page(){var a=$("#history option:selected").text()||"新文件",b=$("#history").val()||"",c="/code/editor?customer="+target_id+"&file_type="+target_type+"&record_key="+b;$("#page_viewer").load(c,function(){showNotify("已載入 "+a),$(".codemirror").each(function(){var a=$(this).attr("id");void 0==a&&(a=$(this).attr("name"),$(this).attr("id",a));var b=target_type;"html"==target_type&&(b="text/html"),console.log(b),code_editor=CodeMirror.fromTextArea(document.getElementById(a),{mode:b,lineNumbers:!0,indentUnit:4,matchBrackets:!0,foldGutter:!0,autofocus:!0,extraKeys:{"Ctrl-S":function(a){""!=target_id&&$("#btn_1").click()}},extra_keywords:["sql","response"]}),code_editor.on("change",function(b){$("#"+a).val(b.getValue()),$("#"+a).change()})})})}function selectTheme(){var a=$("#theme-select option:selected").text();code_editor.setOption("theme",a)}function after_save(a){showNotify("已儲存"),load()}function load(a){$("#history").html(""),json_async("/admin/code/records?target="+target_id+"&content_type="+target_type,null,function(b){$.map(b.records,function(a,b){var c=a.modified.isoformat.replace("T"," ").split(".")[0];$("#history").append("<option value='"+a.__key__+"'>"+a.title+" - "+c+"</option>")}),"function"==typeof a&&a(b)})}function json(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:!1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function json_async(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function ajax(a,b,c,d){$.ajax({url:a,type:"GET",cache:!1,data:b,async:!0,success:function(a){c(a)},error:function(a,b,c){d?d(a.responseText):window.alert(c.message)}})}function html2text(){$(".html_2_text").each(function(){var a=$(this).text(),b=$(this).text().length,c=50;if(void 0!=$(this).data("word-count"))try{c=parseInt($(this).data("word-count"))}catch(a){}c>0&&($(this).text(a.substring(0,c)),b>=c&&$(this).text($(this).text()+"...")),$(this).show()})}function yooliang_replace_url_param(a,b,c){a=a.replace("#/","");var d="",e=(a.substring(0,a.indexOf("?")),a.substring(a.indexOf("?"),a.length)),f=0;if(a.indexOf("?")>=0){var g=e.indexOf(b+"=");g>=0?(f=e.indexOf("&",g),f>=0?(d=e.substring(g+b.length+1,f),e=a.replace(b+"="+d,b+"="+c)):(d=e.substring(g+b.length+1,e.length),e=a.replace(b+"="+d,b+"="+c))):e=a+"&"+b+"="+c}else e=a+"?"+b+"="+c;return e}function showNotify(a){top.message.quick_info(a)}function show_page(){var a=$("#history option:selected").text()||"新文件",b=$("#history").val()||"",c="/code/editor?customer="+target_id+"&file_type="+target_type+"&record_key="+b;$("#page_viewer").load(c,function(){showNotify("已載入 "+a),$(".codemirror").each(function(){var a=$(this).attr("id");void 0==a&&(a=$(this).attr("name"),$(this).attr("id",a));var b=target_type;"html"==target_type&&(b="text/html"),console.log(b),code_editor=CodeMirror.fromTextArea(document.getElementById(a),{mode:b,lineNumbers:!0,indentUnit:4,matchBrackets:!0,foldGutter:!0,autofocus:!0,extraKeys:{"Ctrl-S":function(a){""!=target_id&&$("#btn_1").click()}},extra_keywords:["sql","response"]}),code_editor.on("change",function(b){$("#"+a).val(b.getValue()),$("#"+a).change()})})})}function selectTheme(){var a=$("#theme-select option:selected").text();code_editor.setOption("theme",a)}function after_save(a){showNotify("已儲存"),load()}function load(a){$("#history").html(""),json_async("/admin/code/records?target="+target_id+"&content_type="+target_type,null,function(b){$.map(b.records,function(a,b){var c=a.modified.isoformat.replace("T"," ").split(".")[0];$("#history").append("<option value='"+a.__key__+"'>"+a.title+" - "+c+"</option>")}),"function"==typeof a&&a(b)})}function json(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:!1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function json_async(a,b,c,d){$.ajax({url:a,type:"POST",cache:!1,dataType:"json",data:b,async:1,success:function(a){c(a)},error:function(a,b,c){void 0==d?showNotify(c.message):d(c.message)}})}function ajax(a,b,c,d){$.ajax({url:a,type:"GET",cache:!1,data:b,async:!0,success:function(a){c(a)},error:function(a,b,c){d?d(a.responseText):window.alert(c.message)}})}function html2text(){$(".html_2_text").each(function(){var a=$(this).text(),b=$(this).text().length,c=50;if(void 0!=$(this).data("word-count"))try{c=parseInt($(this).data("word-count"))}catch(a){}c>0&&($(this).text(a.substring(0,c)),b>=c&&$(this).text($(this).text()+"...")),$(this).show()})}function yooliang_replace_url_param(a,b,c){a=a.replace("#/","");var d="",e=(a.substring(0,a.indexOf("?")),a.substring(a.indexOf("?"),a.length)),f=0;if(a.indexOf("?")>=0){var g=e.indexOf(b+"=");g>=0?(f=e.indexOf("&",g),f>=0?(d=e.substring(g+b.length+1,f),e=a.replace(b+"="+d,b+"="+c)):(d=e.substring(g+b.length+1,e.length),e=a.replace(b+"="+d,b+"="+c))):e=a+"&"+b+"="+c}else e=a+"?"+b+"="+c;return e}function showNotify(a){top.message.quick_info(a)}function show_page(){var a=$("#history option:selected").text()||"新文件",b=$("#history").val()||"",c="/code/editor?customer="+target_id+"&file_type="+target_type+"&record_key="+b;$("#page_viewer").load(c,function(){showNotify("已載入 "+a),$(".codemirror").each(function(){var a=$(this).attr("id");void 0==a&&(a=$(this).attr("name"),$(this).attr("id",a));var b=target_type;"html"==target_type&&(b="text/html"),console.log(b),code_editor=CodeMirror.fromTextArea(document.getElementById(a),{mode:b,lineNumbers:!0,indentUnit:4,matchBrackets:!0,foldGutter:!0,autofocus:!0,extraKeys:{"Ctrl-S":function(a){""!=target_id&&$("#btn_1").click()}},extra_keywords:["sql","response"]}),code_editor.on("change",function(b){$("#"+a).val(b.getValue()),$("#"+a).change()})})})}function selectTheme(){var a=$("#theme-select option:selected").text();code_editor.setOption("theme",a)}function after_save(a){showNotify("已儲存"),load()}function load(a){$("#history").html(""),json_async("/admin/code/records?target="+target_id+"&content_type="+target_type,null,function(b){$.map(b.records,function(a,b){var c=a.modified.isoformat.replace("T"," ").split(".")[0];$("#history").append("<option value='"+a.__key__+"'>"+a.title+" - "+c+"</option>")}),"function"==typeof a&&a(b)})}var isHover=!0;!function(a,b,c){a.fn.paging=function(d,e){var f=this,g={setOptions:function(d){return this.a=a.extend(this.a||{lapping:0,perpage:10,page:1,refresh:{interval:10,url:null},format:"",onFormat:function(){},onSelect:function(){return!0},onRefresh:function(){}},d||{}),this.a.lapping|=0,this.a.perpage|=0,null!==this.a.page&&(this.a.page|=0),1>this.a.perpage&&(this.a.perpage=10),this.k&&b.clearInterval(this.k),this.a.refresh.url&&(this.k=b.setInterval(function(b){a.ajax({url:b.a.refresh.url,success:function(c){if("string"==typeof c)try{c=a.parseJSON(c)}catch(a){return}b.a.onRefresh(c)}})},1e3*this.a.refresh.interval,this)),this.l=function(a){for(var b,d=0,e=0,f=1,g={e:[],h:0,g:0,b:5,d:3,j:0,m:0},h=/[*<>pq\[\]().-]|[nc]+!?/g,i={"[":"first","]":"last","<":"prev",">":"next",q:"left",p:"right","-":"fill",".":"leap"},j={};b=h.exec(a);)b=""+b,c===i[b]?"("===b?e=++d:")"===b?e=0:f&&("*"===b?(g.h=1,g.g=0):(g.h=0,g.g="!"===b.charAt(b.length-1),g.b=b.length-g.g,(g.d=1+b.indexOf("c"))||(g.d=1+g.b>>1)),g.e[g.e.length]={f:"block",i:0,c:0},f=0):(g.e[g.e.length]={f:i[b],i:e,c:c===j[b]?j[b]=1:++j[b]},"q"===b?++g.m:"p"===b&&++g.j);return g}(this.a.format),this},setNumber:function(a){return this.o=c===a||0>a?-1:a,this},setPage:function(d){function e(a,b,c){c=""+a.onFormat.call(b,c),k=b.value?k+c.replace("<a",'<a data-page="'+b.value+'"'):k+c}if(c===d){if(d=this.a.page,null===d)return this}else if(this.a.page==d)return this;this.a.page=d|=0;var h,i,j,k,l,m,n,o,p=this.o,q=this.a,r=1,s=this.l,t=s.e.length,u=t;for(q.perpage<=q.lapping&&(q.lapping=q.perpage-1),o=p<=q.lapping?0:0|q.lapping,0>p?(j=p=-1,h=Math.max(1,d-s.d+1-o),i=h+s.b):(j=1+Math.ceil((p-q.perpage)/(q.perpage-o)),d=Math.max(1,Math.min(0>d?1+j+d:d,j)),s.h?(h=1,i=1+j,s.d=d,s.b=j):(h=Math.max(1,Math.min(d-s.d,j-s.b)+1),i=s.g?h+s.b:Math.min(h+s.b,1+j)));u--;){switch(m=0,n=s.e[u],n.f){case"left":m=n.c<h;break;case"right":m=i<=j-s.j+n.c;break;case"first":m=s.d<d;break;case"last":m=s.b<s.d+j-d;break;case"prev":m=1<d;break;case"next":m=d<j}r|=m<<n.i}for(l={number:p,lapping:o,pages:j,perpage:q.perpage,page:d,slice:[(m=d*(q.perpage-o)+o)-q.perpage,Math.min(m,p)]},k="";++u<t;){switch(n=s.e[u],m=r>>n.i&1,n.f){case"block":for(;h<i;++h)l.value=h,l.pos=1+s.b-i+h,l.active=h<=j||0>p,l.first=1===h,l.last=h==j&&0<p,e(q,l,n.f);continue;case"left":l.value=n.c,l.active=n.c<h;break;case"right":l.value=j-s.j+n.c,l.active=i<=l.value;break;case"first":l.value=1,l.active=m&&1<d;break;case"prev":l.value=Math.max(1,d-1),l.active=m&&1<d;break;case"last":(l.active=0>p)?l.value=1+d:(l.value=j,l.active=m&&d<j);break;case"next":(l.active=0>p)?l.value=1+d:(l.value=Math.min(1+d,j),l.active=m&&d<j);break;case"leap":case"fill":l.pos=n.c,l.active=m,e(q,l,n.f);continue}l.pos=n.c,l.last=l.first=c,e(q,l,n.f)}return f.length&&(a("a",f.html(k)).click(function(c){c.preventDefault(),c=this;do if("a"===c.nodeName.toLowerCase())break;while(c=c.parentNode);g.setPage(a(c).data("page")),g.n&&(b.location=c.href)}),this.n=q.onSelect.call({number:p,lapping:o,pages:j,slice:l.slice},d)),this}};return g.setNumber(d).setOptions(e).setPage()}}(jQuery,this),function(a){a.fn.ScaleImg=function(b){return b=jQuery.extend({width:0,height:0},b),this.each(function(){a(this).css("position","relative").css("vertical-align","text-top");var b=a(this).parent().get(0).tagName;"A"==b&&"block"!=a(this).parent().css("display")?$par=a(this).parent().parent():$par=a(this).parent(),$par.css("vertical-align","text-top").css("text-align","left");var c=$par.height(),d=$par.width();a.fn.ScaleImg.Run(a(this),d,c);try{a(this).load(function(){a.fn.ScaleImg.Run(a(this),d,c)})}catch(a){}})},a.fn.ScaleImg.Run=function(b,c,d){var e=b.attr("src"),f=new Image;f.src=e;var g=0,h=0,i=function(){f.width>0&&f.height>0&&(f.width/f.height>=c/d?f.width>c?(g=c,h=f.height*c/f.width):(g=f.width,h=f.height):f.height>d?(g=f.width*d/f.height,h=d):(g=f.width,h=f.height)),b.width(g),b.height(h)};i();var j=a("<span>Loading..</span>");b.hide(),b.after(j),j.remove(),b.show();var k=b.height(),l=b.width();l>c?b.css("left",(l-c)/2):b.css("left",(c-l)/2),k>d?b.css("top",(k-d)/2):b.css("top",(d-k)/2)}}(jQuery);var target_id="",target_path="",target_type="",code_editor=null;$(function(){target_id=$("body").data("target-id"),target_path=$("body").data("path"),target_type="html",target_path.indexOf(".js")>0&&(target_type="javascript"),target_path.indexOf(".css")>0&&(target_type="css"),load(function(){$("#history option").length>0?($("#history option").eq(0).prop("selected","selected"),$("#history").change()):show_page()}),$("#history").change(show_page),$("#btn_1").click(function(a){a.preventDefault();var b=$("form").serialize();json_async("/admin/code/save","target="+target_id+"&file_type="+target_type+"&"+b,after_save,after_save)})});var isHover=!0;!function(a,b,c){a.fn.paging=function(d,e){var f=this,g={setOptions:function(d){return this.a=a.extend(this.a||{lapping:0,perpage:10,page:1,refresh:{interval:10,url:null},format:"",onFormat:function(){},onSelect:function(){return!0},onRefresh:function(){}},d||{}),this.a.lapping|=0,this.a.perpage|=0,null!==this.a.page&&(this.a.page|=0),1>this.a.perpage&&(this.a.perpage=10),this.k&&b.clearInterval(this.k),this.a.refresh.url&&(this.k=b.setInterval(function(b){a.ajax({url:b.a.refresh.url,success:function(c){if("string"==typeof c)try{c=a.parseJSON(c)}catch(a){return}b.a.onRefresh(c)}})},1e3*this.a.refresh.interval,this)),this.l=function(a){for(var b,d=0,e=0,f=1,g={e:[],h:0,g:0,b:5,d:3,j:0,m:0},h=/[*<>pq\[\]().-]|[nc]+!?/g,i={"[":"first","]":"last","<":"prev",">":"next",q:"left",p:"right","-":"fill",".":"leap"},j={};b=h.exec(a);)b=""+b,c===i[b]?"("===b?e=++d:")"===b?e=0:f&&("*"===b?(g.h=1,g.g=0):(g.h=0,g.g="!"===b.charAt(b.length-1),g.b=b.length-g.g,(g.d=1+b.indexOf("c"))||(g.d=1+g.b>>1)),g.e[g.e.length]={f:"block",i:0,c:0},f=0):(g.e[g.e.length]={f:i[b],i:e,c:c===j[b]?j[b]=1:++j[b]},"q"===b?++g.m:"p"===b&&++g.j);return g}(this.a.format),this},setNumber:function(a){return this.o=c===a||0>a?-1:a,this},setPage:function(d){function e(a,b,c){c=""+a.onFormat.call(b,c),k=b.value?k+c.replace("<a",'<a data-page="'+b.value+'"'):k+c}if(c===d){if(d=this.a.page,null===d)return this}else if(this.a.page==d)return this;this.a.page=d|=0;var h,i,j,k,l,m,n,o,p=this.o,q=this.a,r=1,s=this.l,t=s.e.length,u=t;for(q.perpage<=q.lapping&&(q.lapping=q.perpage-1),o=p<=q.lapping?0:0|q.lapping,0>p?(j=p=-1,h=Math.max(1,d-s.d+1-o),i=h+s.b):(j=1+Math.ceil((p-q.perpage)/(q.perpage-o)),d=Math.max(1,Math.min(0>d?1+j+d:d,j)),s.h?(h=1,i=1+j,s.d=d,s.b=j):(h=Math.max(1,Math.min(d-s.d,j-s.b)+1),i=s.g?h+s.b:Math.min(h+s.b,1+j)));u--;){switch(m=0,n=s.e[u],n.f){case"left":m=n.c<h;break;case"right":m=i<=j-s.j+n.c;break;case"first":m=s.d<d;break;case"last":m=s.b<s.d+j-d;break;case"prev":m=1<d;break;case"next":m=d<j}r|=m<<n.i}for(l={number:p,lapping:o,pages:j,perpage:q.perpage,page:d,slice:[(m=d*(q.perpage-o)+o)-q.perpage,Math.min(m,p)]},k="";++u<t;){switch(n=s.e[u],m=r>>n.i&1,n.f){case"block":for(;h<i;++h)l.value=h,l.pos=1+s.b-i+h,l.active=h<=j||0>p,l.first=1===h,l.last=h==j&&0<p,e(q,l,n.f);continue;case"left":l.value=n.c,l.active=n.c<h;break;case"right":l.value=j-s.j+n.c,l.active=i<=l.value;break;case"first":l.value=1,l.active=m&&1<d;break;case"prev":l.value=Math.max(1,d-1),l.active=m&&1<d;break;case"last":(l.active=0>p)?l.value=1+d:(l.value=j,l.active=m&&d<j);break;case"next":(l.active=0>p)?l.value=1+d:(l.value=Math.min(1+d,j),l.active=m&&d<j);break;case"leap":case"fill":l.pos=n.c,l.active=m,e(q,l,n.f);continue}l.pos=n.c,l.last=l.first=c,e(q,l,n.f)}return f.length&&(a("a",f.html(k)).click(function(c){c.preventDefault(),c=this;do if("a"===c.nodeName.toLowerCase())break;while(c=c.parentNode);g.setPage(a(c).data("page")),g.n&&(b.location=c.href)}),this.n=q.onSelect.call({number:p,lapping:o,pages:j,slice:l.slice},d)),this}};return g.setNumber(d).setOptions(e).setPage()}}(jQuery,this),function(a){a.fn.ScaleImg=function(b){return b=jQuery.extend({width:0,height:0},b),this.each(function(){a(this).css("position","relative").css("vertical-align","text-top");var b=a(this).parent().get(0).tagName;"A"==b&&"block"!=a(this).parent().css("display")?$par=a(this).parent().parent():$par=a(this).parent(),$par.css("vertical-align","text-top").css("text-align","left");var c=$par.height(),d=$par.width();a.fn.ScaleImg.Run(a(this),d,c);try{a(this).load(function(){a.fn.ScaleImg.Run(a(this),d,c)})}catch(a){}})},a.fn.ScaleImg.Run=function(b,c,d){var e=b.attr("src"),f=new Image;f.src=e;var g=0,h=0,i=function(){f.width>0&&f.height>0&&(f.width/f.height>=c/d?f.width>c?(g=c,h=f.height*c/f.width):(g=f.width,h=f.height):f.height>d?(g=f.width*d/f.height,h=d):(g=f.width,h=f.height)),b.width(g),b.height(h)};i();var j=a("<span>Loading..</span>");b.hide(),b.after(j),j.remove(),b.show();var k=b.height(),l=b.width();l>c?b.css("left",(l-c)/2):b.css("left",(c-l)/2),k>d?b.css("top",(k-d)/2):b.css("top",(d-k)/2)}}(jQuery);var target_id="",target_path="",target_type="",code_editor=null;$(function(){target_id=$("body").data("target-id"),target_path=$("body").data("path"),target_type="html",target_path.indexOf(".js")>0&&(target_type="javascript"),target_path.indexOf(".css")>0&&(target_type="css"),load(function(){$("#history option").length>0?($("#history option").eq(0).prop("selected","selected"),$("#history").change()):show_page()}),$("#history").change(show_page),$("#btn_1").click(function(a){a.preventDefault();var b=$("form").serialize();json_async("/admin/code/save","target="+target_id+"&file_type="+target_type+"&"+b,after_save,after_save)})});var isHover=!0;!function(a,b,c){a.fn.paging=function(d,e){var f=this,g={setOptions:function(d){return this.a=a.extend(this.a||{lapping:0,perpage:10,page:1,refresh:{interval:10,url:null},format:"",onFormat:function(){},onSelect:function(){return!0},onRefresh:function(){}},d||{}),this.a.lapping|=0,this.a.perpage|=0,null!==this.a.page&&(this.a.page|=0),1>this.a.perpage&&(this.a.perpage=10),this.k&&b.clearInterval(this.k),this.a.refresh.url&&(this.k=b.setInterval(function(b){a.ajax({url:b.a.refresh.url,success:function(c){if("string"==typeof c)try{c=a.parseJSON(c)}catch(a){return}b.a.onRefresh(c)}})},1e3*this.a.refresh.interval,this)),this.l=function(a){for(var b,d=0,e=0,f=1,g={e:[],h:0,g:0,b:5,d:3,j:0,m:0},h=/[*<>pq\[\]().-]|[nc]+!?/g,i={"[":"first","]":"last","<":"prev",">":"next",q:"left",p:"right","-":"fill",".":"leap"},j={};b=h.exec(a);)b=""+b,c===i[b]?"("===b?e=++d:")"===b?e=0:f&&("*"===b?(g.h=1,g.g=0):(g.h=0,g.g="!"===b.charAt(b.length-1),g.b=b.length-g.g,(g.d=1+b.indexOf("c"))||(g.d=1+g.b>>1)),g.e[g.e.length]={f:"block",i:0,c:0},f=0):(g.e[g.e.length]={f:i[b],i:e,c:c===j[b]?j[b]=1:++j[b]},"q"===b?++g.m:"p"===b&&++g.j);return g}(this.a.format),this},setNumber:function(a){return this.o=c===a||0>a?-1:a,this},setPage:function(d){function e(a,b,c){c=""+a.onFormat.call(b,c),k=b.value?k+c.replace("<a",'<a data-page="'+b.value+'"'):k+c}if(c===d){if(d=this.a.page,null===d)return this}else if(this.a.page==d)return this;this.a.page=d|=0;var h,i,j,k,l,m,n,o,p=this.o,q=this.a,r=1,s=this.l,t=s.e.length,u=t;for(q.perpage<=q.lapping&&(q.lapping=q.perpage-1),o=p<=q.lapping?0:0|q.lapping,0>p?(j=p=-1,h=Math.max(1,d-s.d+1-o),i=h+s.b):(j=1+Math.ceil((p-q.perpage)/(q.perpage-o)),d=Math.max(1,Math.min(0>d?1+j+d:d,j)),s.h?(h=1,i=1+j,s.d=d,s.b=j):(h=Math.max(1,Math.min(d-s.d,j-s.b)+1),i=s.g?h+s.b:Math.min(h+s.b,1+j)));u--;){switch(m=0,n=s.e[u],n.f){case"left":m=n.c<h;break;case"right":m=i<=j-s.j+n.c;break;case"first":m=s.d<d;break;case"last":m=s.b<s.d+j-d;break;case"prev":m=1<d;break;case"next":m=d<j}r|=m<<n.i}for(l={number:p,lapping:o,pages:j,perpage:q.perpage,page:d,slice:[(m=d*(q.perpage-o)+o)-q.perpage,Math.min(m,p)]},k="";++u<t;){switch(n=s.e[u],m=r>>n.i&1,n.f){case"block":for(;h<i;++h)l.value=h,l.pos=1+s.b-i+h,l.active=h<=j||0>p,l.first=1===h,l.last=h==j&&0<p,e(q,l,n.f);continue;case"left":l.value=n.c,l.active=n.c<h;break;case"right":l.value=j-s.j+n.c,l.active=i<=l.value;break;case"first":l.value=1,l.active=m&&1<d;break;case"prev":l.value=Math.max(1,d-1),l.active=m&&1<d;break;case"last":(l.active=0>p)?l.value=1+d:(l.value=j,l.active=m&&d<j);break;case"next":(l.active=0>p)?l.value=1+d:(l.value=Math.min(1+d,j),l.active=m&&d<j);break;case"leap":case"fill":l.pos=n.c,l.active=m,e(q,l,n.f);continue}l.pos=n.c,l.last=l.first=c,e(q,l,n.f)}return f.length&&(a("a",f.html(k)).click(function(c){c.preventDefault(),c=this;do if("a"===c.nodeName.toLowerCase())break;while(c=c.parentNode);g.setPage(a(c).data("page")),g.n&&(b.location=c.href)}),this.n=q.onSelect.call({number:p,lapping:o,pages:j,slice:l.slice},d)),this}};return g.setNumber(d).setOptions(e).setPage()}}(jQuery,this),function(a){a.fn.ScaleImg=function(b){return b=jQuery.extend({width:0,height:0},b),this.each(function(){a(this).css("position","relative").css("vertical-align","text-top");var b=a(this).parent().get(0).tagName;"A"==b&&"block"!=a(this).parent().css("display")?$par=a(this).parent().parent():$par=a(this).parent(),$par.css("vertical-align","text-top").css("text-align","left");var c=$par.height(),d=$par.width();a.fn.ScaleImg.Run(a(this),d,c);try{a(this).load(function(){a.fn.ScaleImg.Run(a(this),d,c)})}catch(a){}})},a.fn.ScaleImg.Run=function(b,c,d){var e=b.attr("src"),f=new Image;f.src=e;var g=0,h=0,i=function(){f.width>0&&f.height>0&&(f.width/f.height>=c/d?f.width>c?(g=c,h=f.height*c/f.width):(g=f.width,h=f.height):f.height>d?(g=f.width*d/f.height,h=d):(g=f.width,h=f.height)),b.width(g),b.height(h)};i();var j=a("<span>Loading..</span>");b.hide(),b.after(j),j.remove(),b.show();var k=b.height(),l=b.width();l>c?b.css("left",(l-c)/2):b.css("left",(c-l)/2),k>d?b.css("top",(k-d)/2):b.css("top",(d-k)/2)}}(jQuery);var target_id="",target_path="",target_type="",code_editor=null;$(function(){target_id=$("body").data("target-id"),target_path=$("body").data("path"),target_type="html",target_path.indexOf(".js")>0&&(target_type="javascript"),target_path.indexOf(".css")>0&&(target_type="css"),load(function(){$("#history option").length>0?($("#history option").eq(0).prop("selected","selected"),$("#history").change()):show_page()}),$("#history").change(show_page),$("#btn_1").click(function(a){a.preventDefault();var b=$("form").serialize();json_async("/admin/code/save","target="+target_id+"&file_type="+target_type+"&"+b,after_save,after_save)})});var isHover=!0;!function(a,b,c){a.fn.paging=function(d,e){var f=this,g={setOptions:function(d){return this.a=a.extend(this.a||{lapping:0,perpage:10,page:1,refresh:{interval:10,url:null},format:"",onFormat:function(){},onSelect:function(){return!0},onRefresh:function(){}},d||{}),this.a.lapping|=0,this.a.perpage|=0,null!==this.a.page&&(this.a.page|=0),1>this.a.perpage&&(this.a.perpage=10),this.k&&b.clearInterval(this.k),this.a.refresh.url&&(this.k=b.setInterval(function(b){a.ajax({url:b.a.refresh.url,success:function(c){if("string"==typeof c)try{c=a.parseJSON(c)}catch(a){return}b.a.onRefresh(c)}})},1e3*this.a.refresh.interval,this)),this.l=function(a){for(var b,d=0,e=0,f=1,g={e:[],h:0,g:0,b:5,d:3,j:0,m:0},h=/[*<>pq\[\]().-]|[nc]+!?/g,i={"[":"first","]":"last","<":"prev",">":"next",q:"left",p:"right","-":"fill",".":"leap"},j={};b=h.exec(a);)b=""+b,c===i[b]?"("===b?e=++d:")"===b?e=0:f&&("*"===b?(g.h=1,g.g=0):(g.h=0,g.g="!"===b.charAt(b.length-1),g.b=b.length-g.g,(g.d=1+b.indexOf("c"))||(g.d=1+g.b>>1)),g.e[g.e.length]={f:"block",i:0,c:0},f=0):(g.e[g.e.length]={f:i[b],i:e,c:c===j[b]?j[b]=1:++j[b]},"q"===b?++g.m:"p"===b&&++g.j);return g}(this.a.format),this},setNumber:function(a){return this.o=c===a||0>a?-1:a,this},setPage:function(d){function e(a,b,c){c=""+a.onFormat.call(b,c),k=b.value?k+c.replace("<a",'<a data-page="'+b.value+'"'):k+c}if(c===d){if(d=this.a.page,null===d)return this}else if(this.a.page==d)return this;this.a.page=d|=0;var h,i,j,k,l,m,n,o,p=this.o,q=this.a,r=1,s=this.l,t=s.e.length,u=t;for(q.perpage<=q.lapping&&(q.lapping=q.perpage-1),o=p<=q.lapping?0:0|q.lapping,0>p?(j=p=-1,h=Math.max(1,d-s.d+1-o),i=h+s.b):(j=1+Math.ceil((p-q.perpage)/(q.perpage-o)),d=Math.max(1,Math.min(0>d?1+j+d:d,j)),s.h?(h=1,i=1+j,s.d=d,s.b=j):(h=Math.max(1,Math.min(d-s.d,j-s.b)+1),i=s.g?h+s.b:Math.min(h+s.b,1+j)));u--;){switch(m=0,n=s.e[u],n.f){case"left":m=n.c<h;break;case"right":m=i<=j-s.j+n.c;break;case"first":m=s.d<d;break;case"last":m=s.b<s.d+j-d;break;case"prev":m=1<d;break;case"next":m=d<j}r|=m<<n.i}for(l={number:p,lapping:o,pages:j,perpage:q.perpage,page:d,slice:[(m=d*(q.perpage-o)+o)-q.perpage,Math.min(m,p)]},k="";++u<t;){switch(n=s.e[u],m=r>>n.i&1,n.f){case"block":for(;h<i;++h)l.value=h,l.pos=1+s.b-i+h,l.active=h<=j||0>p,l.first=1===h,l.last=h==j&&0<p,e(q,l,n.f);continue;case"left":l.value=n.c,l.active=n.c<h;break;case"right":l.value=j-s.j+n.c,l.active=i<=l.value;break;case"first":l.value=1,l.active=m&&1<d;break;case"prev":l.value=Math.max(1,d-1),l.active=m&&1<d;break;case"last":(l.active=0>p)?l.value=1+d:(l.value=j,l.active=m&&d<j);break;case"next":(l.active=0>p)?l.value=1+d:(l.value=Math.min(1+d,j),l.active=m&&d<j);break;case"leap":case"fill":l.pos=n.c,l.active=m,e(q,l,n.f);continue}l.pos=n.c,l.last=l.first=c,e(q,l,n.f)}return f.length&&(a("a",f.html(k)).click(function(c){c.preventDefault(),c=this;do if("a"===c.nodeName.toLowerCase())break;while(c=c.parentNode);g.setPage(a(c).data("page")),g.n&&(b.location=c.href)}),this.n=q.onSelect.call({number:p,lapping:o,pages:j,slice:l.slice},d)),this}};return g.setNumber(d).setOptions(e).setPage()}}(jQuery,this),function(a){a.fn.ScaleImg=function(b){return b=jQuery.extend({width:0,height:0},b),this.each(function(){a(this).css("position","relative").css("vertical-align","text-top");var b=a(this).parent().get(0).tagName;"A"==b&&"block"!=a(this).parent().css("display")?$par=a(this).parent().parent():$par=a(this).parent(),$par.css("vertical-align","text-top").css("text-align","left");var c=$par.height(),d=$par.width();a.fn.ScaleImg.Run(a(this),d,c);try{a(this).load(function(){a.fn.ScaleImg.Run(a(this),d,c)})}catch(a){}})},a.fn.ScaleImg.Run=function(b,c,d){var e=b.attr("src"),f=new Image;f.src=e;var g=0,h=0,i=function(){f.width>0&&f.height>0&&(f.width/f.height>=c/d?f.width>c?(g=c,h=f.height*c/f.width):(g=f.width,h=f.height):f.height>d?(g=f.width*d/f.height,h=d):(g=f.width,h=f.height)),b.width(g),b.height(h)};i();var j=a("<span>Loading..</span>");b.hide(),b.after(j),j.remove(),b.show();var k=b.height(),l=b.width();l>c?b.css("left",(l-c)/2):b.css("left",(c-l)/2),k>d?b.css("top",(k-d)/2):b.css("top",(d-k)/2)}}(jQuery);var target_id="",target_path="",target_type="",code_editor=null;$(function(){target_id=$("body").data("target-id"),target_path=$("body").data("path"),target_type="html",target_path.indexOf(".js")>0&&(target_type="javascript"),target_path.indexOf(".css")>0&&(target_type="css"),load(function(){$("#history option").length>0?($("#history option").eq(0).prop("selected","selected"),$("#history").change()):show_page()}),$("#history").change(show_page),$("#btn_1").click(function(a){a.preventDefault();var b=$("form").serialize();json_async("/admin/code/save","target="+target_id+"&file_type="+target_type+"&"+b,after_save,after_save)})});
//# sourceMappingURL=code_editor.min.js.map